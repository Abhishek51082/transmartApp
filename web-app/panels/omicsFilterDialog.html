<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Omics Filter Dialog</title>
    <style>
        .ui-autocomplete {
            max-height: 100px;
            overflow-y: auto;
            /* prevent horizontal scrollbar */
            overflow-x: hidden;
            /* add padding to account for vertical scrollbar */
            padding-right: 20px;
        }
    </style>
</head>
<body>
<script type="text/javascript">

    jQuery(document).ready(function() {
                addOmicsFilterGeneSearchAutocomplete();
            }
    );

    function addOmicsFilterGeneSearchAutocomplete() {

        jQuery("#gene-searchbox").css({"max-height": "300px", "overflow-y": "auto", "overflow-x": "hidden", "padding-right": "20px"});
        jQuery("#gene-searchbox").autocomplete({
            position:{my:"left top",at:"left bottom",collision:"none"},
            appendTo:"#omicsFilterWindow",
            source: '', // showOmicsFilterDialog() will set this
            minLength:1,
            select: function(event, ui) {
                jQuery("gene-searchbox").val(ui.item.label);
            },
            focus: function(event, ui) {
                jQuery("gene-searchbox").val(ui.item.label);
            },
            close: function(event, ui) {
                if (ui.item) {
                    jQuery("gene-searchbox").val(ui.item.label);
                }
            }
        }).data("uiAutocomplete")._renderItem = function( ul, item ) {
            var resulta = '<a><span class="category-gene"><b>' + item.label + '</b>';
            if (item.synonyms != null) {
                resulta += (item.synonyms + '</a>');
            }
            else {
                resulta += '</a>';
            }

            return jQuery('<li></li>')
                    .data("item.autocomplete", item )
                    .append(resulta)
                    .appendTo(ul);
        };
    }

    function setOmicsValueMethodChanged(method) {
        switch(method) {
            case "novalue":
                document.getElementById("divrelative").style.display="none";
                document.getElementById("gene-selection").style.display="inline";
                break;
            case "relative":
                document.getElementById("divrelative").style.display="inline";
                document.getElementById("gene-selection").style.display="inline";
                break;
        }
    }
</script>
<div style="..." id="omics-filter-main">
    <table style="font:9pt arial;width:500px">
        <tr><td colspan="2">Filter subjects based on omics data.</td></tr>
        <tr>
            <td width="200px"><input type="radio" name="setOmicsValueMethod" id="noValueOmicsMethod" value="novalue" onclick="setOmicsValueMethodChanged(this.value)">No Value
            <br>
                <input type="radio" name="setOmicsValueMethod" value="relative" onclick="setOmicsValueMethodChanged(this.value)">By relative value
            </td>
            <td width="200px">
                <div id="divrelative">
                    <select id="setOmicsValueOperator">
                        <option value="GT">top</option>
                        <option value="LT">bottom</option>
                    </select>
                    <input type="text" name="gene-value" id="setOmicsValueValue" size="5"/> percent
                </div>
            </td>
        </tr>
        <tr><td colspan="2"><div id="gene-selection"><label for="gene-searchbox">Gene: </label><input type="text" id="gene-searchbox" size="10"/></div></td>
        </tr>
    </table>
</div>
</body>
</html>
